{% extends 'base.html.twig' %}

{% block title %}
    {{ 'label.manage_account'|trans }}
{% endblock %}

{% block body %}
    {% if user is defined and user is not null %}
    <h1>
        {% if is_granted('EDIT_USER', user) %}
            {% if app.user.id == user.id %}
                {{ 'label.my_account'|trans }}
            {% else %}
                {{ 'label.manage_account %username%'|trans({'%username%': user.nickname|default('')}) }}
            {% endif %}
        {% else %}
            {{ 'label.account %username%'|trans({'%username%': user.nickname|default('')}) }}
        {% endif %}
    </h1>

    <dl class="dl-horizontal mt-4">
        <dt>{{ 'label.nickname'|trans }}</dt>
        <dd class="d-flex justify-content-between">
            <span>{{ user.nickname }}</span>
            {% if is_granted('EDIT_USER', user) %}
                <a href="{{ url('nick_edit', {id: user.id}) }}" class="btn btn-outline-primary">{{ 'action.edit'|trans }}</a>
            {% endif %}
        </dd>
        <dt>{{ 'label.id'|trans }}</dt>
        <dd>{{ user.id }}</dd>
        <dt>{{ 'label.email'|trans }}</dt>
        <dd class="d-flex justify-content-between">
            <span>{{ user.email }}</span>
            {% if is_granted('EDIT_USER', user) %}
                <a href="{{ url('email_edit', {id: user.id}) }}" class="btn btn-outline-primary">{{ 'action.edit'|trans }}</a>
            {% endif %}
        </dd>
    </dl>
    {% if is_granted('EDIT_USER', user) %}
        <a href="{{ url('pass_edit', {id: user.id}) }}" class="btn btn-outline-primary">{{ 'action.edit_pass'|trans }}</a>
    {% endif %}
    {% if is_granted('DELETE_USER', user) %}
        <a href="{{ url('user_delete', {id: user.id}) }}" class="btn btn-danger">{{ 'action.delete_user'|trans }}</a>
    {% endif %}
    {% endif %}
{% endblock %}